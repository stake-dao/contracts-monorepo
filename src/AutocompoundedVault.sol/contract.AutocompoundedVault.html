<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>AutocompoundedVault - Stake DAO Fusion</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../book.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">README</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/index.html"><strong aria-hidden="true">1.</strong> RouterModules</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterIdentifierMapping.sol/library.RouterIdentifierMapping.html"><strong aria-hidden="true">1.1.</strong> RouterIdentifierMapping</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleClaim.sol/contract.RouterModuleClaim.html"><strong aria-hidden="true">1.2.</strong> RouterModuleClaim</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleDeposit.sol/contract.RouterModuleDeposit.html"><strong aria-hidden="true">1.3.</strong> RouterModuleDeposit</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleMigrationCurve.sol/contract.RouterModuleMigrationCurve.html"><strong aria-hidden="true">1.4.</strong> RouterModuleMigrationCurve</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleMigrationStakeDAOV1.sol/interface.IVault.html"><strong aria-hidden="true">1.5.</strong> IVault</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleMigrationStakeDAOV1.sol/contract.RouterModuleMigrationStakeDAOV1.html"><strong aria-hidden="true">1.6.</strong> RouterModuleMigrationStakeDAOV1</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleMigrationYearn.sol/contract.RouterModuleMigrationYearn.html"><strong aria-hidden="true">1.7.</strong> RouterModuleMigrationYearn</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleMigrationYearn.sol/interface.IYearnVault.html"><strong aria-hidden="true">1.8.</strong> IYearnVault</a></li><li class="chapter-item expanded "><a href="../../src/RouterModules/RouterModuleWithdraw.sol/contract.RouterModuleWithdraw.html"><strong aria-hidden="true">1.9.</strong> RouterModuleWithdraw</a></li></ol></li><li class="chapter-item expanded "><a href="../../src/integrations/index.html"><strong aria-hidden="true">2.</strong> integrations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../src/integrations/curve/index.html"><strong aria-hidden="true">2.1.</strong> curve</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../src/integrations/curve/ConvexSidecar.sol/contract.ConvexSidecar.html"><strong aria-hidden="true">2.1.1.</strong> ConvexSidecar</a></li><li class="chapter-item expanded "><a href="../../src/integrations/curve/ConvexSidecarFactory.sol/contract.ConvexSidecarFactory.html"><strong aria-hidden="true">2.1.2.</strong> ConvexSidecarFactory</a></li><li class="chapter-item expanded "><a href="../../src/integrations/curve/CurveAllocator.sol/contract.CurveAllocator.html"><strong aria-hidden="true">2.1.3.</strong> CurveAllocator</a></li><li class="chapter-item expanded "><a href="../../src/integrations/curve/CurveFactory.sol/contract.CurveFactory.html"><strong aria-hidden="true">2.1.4.</strong> CurveFactory</a></li><li class="chapter-item expanded "><a href="../../src/integrations/curve/CurveStrategy.sol/contract.CurveStrategy.html"><strong aria-hidden="true">2.1.5.</strong> CurveStrategy</a></li></ol></li><li class="chapter-item expanded "><a href="../../src/integrations/yieldnest/index.html"><strong aria-hidden="true">2.2.</strong> yieldnest</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../src/integrations/yieldnest/YieldnestAutocompoundedVault.sol/contract.YieldnestAutocompoundedVault.html"><strong aria-hidden="true">2.2.1.</strong> YieldnestAutocompoundedVault</a></li><li class="chapter-item expanded "><a href="../../src/integrations/yieldnest/YieldnestOFT.sol/contract.YieldnestOFT.html"><strong aria-hidden="true">2.2.2.</strong> YieldnestOFT</a></li><li class="chapter-item expanded "><a href="../../src/integrations/yieldnest/YieldnestOFTAdapter.sol/contract.YieldnestOFTAdapter.html"><strong aria-hidden="true">2.2.3.</strong> YieldnestOFTAdapter</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../src/interfaces/index.html"><strong aria-hidden="true">3.</strong> interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../src/interfaces/IAccountant.sol/interface.IAccountant.html"><strong aria-hidden="true">3.1.</strong> IAccountant</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IAllocator.sol/interface.IAllocator.html"><strong aria-hidden="true">3.2.</strong> IAllocator</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IBalanceProvider.sol/interface.IBalanceProvider.html"><strong aria-hidden="true">3.3.</strong> IBalanceProvider</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IProtocolContext.sol/interface.IProtocolContext.html"><strong aria-hidden="true">3.4.</strong> IProtocolContext</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IProtocolController.sol/interface.IProtocolController.html"><strong aria-hidden="true">3.5.</strong> IProtocolController</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IRewardReceiver.sol/interface.IRewardReceiver.html"><strong aria-hidden="true">3.6.</strong> IRewardReceiver</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IRewardVault.sol/interface.IRewardVault.html"><strong aria-hidden="true">3.7.</strong> IRewardVault</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IRouter.sol/interface.IRouter.html"><strong aria-hidden="true">3.8.</strong> IRouter</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IRouterModule.sol/interface.IRouterModule.html"><strong aria-hidden="true">3.9.</strong> IRouterModule</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/ISidecar.sol/interface.ISidecar.html"><strong aria-hidden="true">3.10.</strong> ISidecar</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/ISidecarFactory.sol/interface.ISidecarFactory.html"><strong aria-hidden="true">3.11.</strong> ISidecarFactory</a></li><li class="chapter-item expanded "><a href="../../src/interfaces/IStrategy.sol/interface.IStrategy.html"><strong aria-hidden="true">3.12.</strong> IStrategy</a></li></ol></li><li class="chapter-item expanded "><a href="../../src/libraries/index.html"><strong aria-hidden="true">4.</strong> libraries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../src/libraries/ImmutableArgsParser.sol/library.ImmutableArgsParser.html"><strong aria-hidden="true">4.1.</strong> ImmutableArgsParser</a></li><li class="chapter-item expanded "><a href="../../src/libraries/LayerZeroEID.sol/library.LayerZeroEID.html"><strong aria-hidden="true">4.2.</strong> LayerZeroEID</a></li></ol></li><li class="chapter-item expanded "><a href="../../src/merkl/index.html"><strong aria-hidden="true">5.</strong> merkl</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../src/merkl/UniversalBoostRegistry.sol/contract.UniversalBoostRegistry.html"><strong aria-hidden="true">5.1.</strong> UniversalBoostRegistry</a></li></ol></li><li class="chapter-item expanded "><a href="../../src/Accountant.sol/contract.Accountant.html"><strong aria-hidden="true">6.</strong> Accountant</a></li><li class="chapter-item expanded "><a href="../../src/Allocator.sol/contract.Allocator.html"><strong aria-hidden="true">7.</strong> Allocator</a></li><li class="chapter-item expanded "><a href="../../src/AutocompoundedVault.sol/contract.AutocompoundedVault.html" class="active"><strong aria-hidden="true">8.</strong> AutocompoundedVault</a></li><li class="chapter-item expanded "><a href="../../src/Factory.sol/abstract.Factory.html"><strong aria-hidden="true">9.</strong> Factory</a></li><li class="chapter-item expanded "><a href="../../src/ProtocolContext.sol/contract.ProtocolContext.html"><strong aria-hidden="true">10.</strong> ProtocolContext</a></li><li class="chapter-item expanded "><a href="../../src/ProtocolController.sol/contract.ProtocolController.html"><strong aria-hidden="true">11.</strong> ProtocolController</a></li><li class="chapter-item expanded "><a href="../../src/RewardReceiver.sol/contract.RewardReceiver.html"><strong aria-hidden="true">12.</strong> RewardReceiver</a></li><li class="chapter-item expanded "><a href="../../src/RewardVault.sol/contract.RewardVault.html"><strong aria-hidden="true">13.</strong> RewardVault</a></li><li class="chapter-item expanded "><a href="../../src/Router.sol/contract.Router.html"><strong aria-hidden="true">14.</strong> Router</a></li><li class="chapter-item expanded "><a href="../../src/Sidecar.sol/abstract.Sidecar.html"><strong aria-hidden="true">15.</strong> Sidecar</a></li><li class="chapter-item expanded "><a href="../../src/SidecarFactory.sol/abstract.SidecarFactory.html"><strong aria-hidden="true">16.</strong> SidecarFactory</a></li><li class="chapter-item expanded "><a href="../../src/Strategy.sol/abstract.Strategy.html"><strong aria-hidden="true">17.</strong> Strategy</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Stake DAO Fusion</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/stake-dao/contracts-monorepo" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="autocompoundedvault"><a class="header" href="#autocompoundedvault">AutocompoundedVault</a></h1>
<p><a href="https://github.com/stake-dao/contracts-monorepo/blob/c64adf37abd541daf84710c37a6b867b54a71b97/src/AutocompoundedVault.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC4626, Ownable2Step</p>
<p>This contract is a fully compliant ERC4626 streaming yield-bearing vault.
The rewards are streamed linearly over a fixed period and the vault is autocompounded.</p>
<p>*Streaming Reward Policy:</p>
<ul>
<li>If a new stream is started before the previous one ends, any unvested rewards from the previous stream
are automatically rolled over and added to the new stream amount. The combined total is then streamed
linearly over the new period.</li>
<li>This mechanism results in a &quot;premium&quot; for users present at the time of the new stream, as the remaining
rewards from the previous stream will vest more quickly than originally scheduled.</li>
<li>For optimal and fair reward distribution, it is strongly recommended to start a new stream only after
the previous stream has ended, or as close as possible to its scheduled end time. Starting new streams
prematurely can lead to accelerated vesting and may distort the intended reward schedule.</li>
<li>This design is a trade-off for simplicity and to keep the reward calendar predictable and aligned.*</li>
</ul>
<p><em>Direct Transfer Handling:
Any tokens sent directly to this contract (not via the setRewards function)
will be considered immediately vested and available to users. This means that accidental or
intentional direct transfers will increase the value returned by totalAssets() and can be
claimed by holders. This is an intentional design choice and should be considered
when integrating with or interacting with this vault.</em></p>
<p>*ERC4626 Virtual Shares/Assets Protection:
This contract inherits from OpenZeppelin's v5 ERC4626, which implements the &quot;virtual shares/assets&quot; protection mechanism.
This mechanism applies a +1 virtual offset to both totalSupply and totalAssets in the share/asset conversion formulas:</p>
<ul>
<li>shares = assets * (totalSupply() + 1) / (totalAssets() + 1)</li>
<li>assets = shares * (totalAssets() + 1) / (totalSupply() + 1)
This contract uses a decimal offset set to 0, which is the OpenZeppelin default.
With this configuration, the protection ensures that donation/inflation attacks are unprofitable.
Even with a decimal offset of 0, the attacker's loss is at least equal to the user's deposit, as documented by OpenZeppelin.*</li>
</ul>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="streaming_period"><a class="header" href="#streaming_period">STREAMING_PERIOD</a></h3>
<p>--- CONSTANTS</p>
<p>The streaming period</p>
<pre><code class="language-solidity">uint128 public immutable STREAMING_PERIOD;
</code></pre>
<h3 id="currentstream"><a class="header" href="#currentstream">currentStream</a></h3>
<p>The current active stream</p>
<pre><code class="language-solidity">Stream internal currentStream;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<p>Initialize the asset and the shares token</p>
<pre><code class="language-solidity">constructor(uint128 streamingPeriod, IERC20 asset, string memory shareName, string memory shareSymbol, address owner)
    ERC4626(asset)
    ERC20(shareName, shareSymbol)
    Ownable(owner);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>streamingPeriod</code></td><td><code>uint128</code></td><td>The streaming period in seconds (e.g. 7 days)</td></tr>
<tr><td><code>asset</code></td><td><code>IERC20</code></td><td>The asset token the users will deposit to the vault (e.g. sdYND)</td></tr>
<tr><td><code>shareName</code></td><td><code>string</code></td><td>The name of the shares token the users will receive</td></tr>
<tr><td><code>shareSymbol</code></td><td><code>string</code></td><td>The symbol of the shares token the users will receive</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the vault</td></tr>
</tbody></table>
</div>
<h3 id="totalassets"><a class="header" href="#totalassets">totalAssets</a></h3>
<p>--- OVERRIDED PUBLIC FUNCTIONS</p>
<p>Returns the total vested (usable) assets in the vault</p>
<p>*This function returns the actual usable balance of the asset token that can be used for share calculations.
It subtracts unvested rewards from the vault's total balance:</p>
<ul>
<li>If there is no active stream, or if the current stream has ended (timestamp &gt;= streamEnd),
returns the vault's full token balance</li>
<li>If there is an active stream, subtracts the unvested portion of the stream from the vault's balance.
The unvested portion is calculated linearly based on the remaining time in the stream*</li>
</ul>
<pre><code class="language-solidity">function totalAssets() public view virtual override returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The total amount of vested asset token that are available for share calculations. This is the value used by the ERC4626 implementation for deposit/withdrawal calculations</td></tr>
</tbody></table>
</div>
<h3 id="setrewards"><a class="header" href="#setrewards">setRewards</a></h3>
<p>--- PUBLIC FUNCTIONS</p>
<p>Streams new rewards to the contract</p>
<p><em>Starting a new stream will add the unvested portion of the previous stream to the new stream
and the new stream will be for <code>STREAMING_PERIOD</code>. See the comments in the contract description for more details.</em></p>
<p><strong>Note:</strong>
throws: OwnableUnauthorizedAccount when the caller is not the owner</p>
<pre><code class="language-solidity">function setRewards(uint256 newAmount) external virtual onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newAmount</code></td><td><code>uint256</code></td><td>The amount of asset tokens to stream</td></tr>
</tbody></table>
</div>
<h3 id="getcurrentstream"><a class="header" href="#getcurrentstream">getCurrentStream</a></h3>
<p>Returns the current stream data</p>
<pre><code class="language-solidity">function getCurrentStream()
    external
    view
    virtual
    returns (uint256 amount, uint256 remainingToken, uint128 start, uint128 end, uint128 remainingTime);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of asset tokens streamed over the streaming period</td></tr>
<tr><td><code>remainingToken</code></td><td><code>uint256</code></td><td>The amount of asset tokens remaining to be streamed</td></tr>
<tr><td><code>start</code></td><td><code>uint128</code></td><td>The start timestamp of the stream</td></tr>
<tr><td><code>end</code></td><td><code>uint128</code></td><td>The end timestamp of the stream</td></tr>
<tr><td><code>remainingTime</code></td><td><code>uint128</code></td><td>The remaining time in the stream (in seconds)</td></tr>
</tbody></table>
</div>
<h3 id="_timestamp"><a class="header" href="#_timestamp">_timestamp</a></h3>
<p>--- INTERNAL FUNCTIONS</p>
<p>Returns the current timestamp casted to a uint128</p>
<p><em>Considering the maximum timestamp is <code>2^128 - 1</code>, casting is safe here
no need of using the <code>SafeCast</code> library</em></p>
<pre><code class="language-solidity">function _timestamp() internal view returns (uint128);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint128</code></td><td>The current timestamp casted to a uint128</td></tr>
</tbody></table>
</div>
<h3 id="version"><a class="header" href="#version">version</a></h3>
<p>Get the version of the contract</p>
<pre><code class="language-solidity">function version() external pure virtual returns (string memory);
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="newstreamrewards"><a class="header" href="#newstreamrewards">NewStreamRewards</a></h3>
<p>--- EVENTS &amp; ERRORS</p>
<p>Event emitted when a new stream is started</p>
<pre><code class="language-solidity">event NewStreamRewards(address indexed caller, uint256 amount, uint128 start, uint128 end);
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="stream"><a class="header" href="#stream">Stream</a></h3>
<p>--- STATE</p>
<p>The struct holding the stream data</p>
<p><em>This struct takes 2 storage slots</em></p>
<pre><code class="language-solidity">struct Stream {
    uint256 amount;
    uint128 start;
    uint128 end;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../src/Allocator.sol/contract.Allocator.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../src/Factory.sol/abstract.Factory.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../src/Allocator.sol/contract.Allocator.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../src/Factory.sol/abstract.Factory.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../solidity.min.js"></script>


    </div>
    </body>
</html>
