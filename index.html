<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>README - Stake DAO Fusion</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html" class="active">README</a></li><li class="chapter-item expanded "><a href="src/RouterModules/index.html"><strong aria-hidden="true">1.</strong> RouterModules</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="src/RouterModules/RouterIdentifierMapping.sol/library.RouterIdentifierMapping.html"><strong aria-hidden="true">1.1.</strong> RouterIdentifierMapping</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleClaim.sol/contract.RouterModuleClaim.html"><strong aria-hidden="true">1.2.</strong> RouterModuleClaim</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleDeposit.sol/contract.RouterModuleDeposit.html"><strong aria-hidden="true">1.3.</strong> RouterModuleDeposit</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleMigrationCurve.sol/contract.RouterModuleMigrationCurve.html"><strong aria-hidden="true">1.4.</strong> RouterModuleMigrationCurve</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleMigrationStakeDAOV1.sol/interface.IVault.html"><strong aria-hidden="true">1.5.</strong> IVault</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleMigrationStakeDAOV1.sol/contract.RouterModuleMigrationStakeDAOV1.html"><strong aria-hidden="true">1.6.</strong> RouterModuleMigrationStakeDAOV1</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleMigrationYearn.sol/contract.RouterModuleMigrationYearn.html"><strong aria-hidden="true">1.7.</strong> RouterModuleMigrationYearn</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleMigrationYearn.sol/interface.IYearnVault.html"><strong aria-hidden="true">1.8.</strong> IYearnVault</a></li><li class="chapter-item expanded "><a href="src/RouterModules/RouterModuleWithdraw.sol/contract.RouterModuleWithdraw.html"><strong aria-hidden="true">1.9.</strong> RouterModuleWithdraw</a></li></ol></li><li class="chapter-item expanded "><a href="src/integrations/index.html"><strong aria-hidden="true">2.</strong> integrations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="src/integrations/curve/index.html"><strong aria-hidden="true">2.1.</strong> curve</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="src/integrations/curve/ConvexSidecar.sol/contract.ConvexSidecar.html"><strong aria-hidden="true">2.1.1.</strong> ConvexSidecar</a></li><li class="chapter-item expanded "><a href="src/integrations/curve/ConvexSidecarFactory.sol/contract.ConvexSidecarFactory.html"><strong aria-hidden="true">2.1.2.</strong> ConvexSidecarFactory</a></li><li class="chapter-item expanded "><a href="src/integrations/curve/CurveAllocator.sol/contract.CurveAllocator.html"><strong aria-hidden="true">2.1.3.</strong> CurveAllocator</a></li><li class="chapter-item expanded "><a href="src/integrations/curve/CurveFactory.sol/contract.CurveFactory.html"><strong aria-hidden="true">2.1.4.</strong> CurveFactory</a></li><li class="chapter-item expanded "><a href="src/integrations/curve/CurveStrategy.sol/contract.CurveStrategy.html"><strong aria-hidden="true">2.1.5.</strong> CurveStrategy</a></li></ol></li><li class="chapter-item expanded "><a href="src/integrations/yieldnest/index.html"><strong aria-hidden="true">2.2.</strong> yieldnest</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="src/integrations/yieldnest/YieldnestAutocompoundedVault.sol/contract.YieldnestAutocompoundedVault.html"><strong aria-hidden="true">2.2.1.</strong> YieldnestAutocompoundedVault</a></li><li class="chapter-item expanded "><a href="src/integrations/yieldnest/YieldnestOFT.sol/contract.YieldnestOFT.html"><strong aria-hidden="true">2.2.2.</strong> YieldnestOFT</a></li><li class="chapter-item expanded "><a href="src/integrations/yieldnest/YieldnestOFTAdapter.sol/contract.YieldnestOFTAdapter.html"><strong aria-hidden="true">2.2.3.</strong> YieldnestOFTAdapter</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="src/interfaces/index.html"><strong aria-hidden="true">3.</strong> interfaces</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="src/interfaces/IAccountant.sol/interface.IAccountant.html"><strong aria-hidden="true">3.1.</strong> IAccountant</a></li><li class="chapter-item expanded "><a href="src/interfaces/IAllocator.sol/interface.IAllocator.html"><strong aria-hidden="true">3.2.</strong> IAllocator</a></li><li class="chapter-item expanded "><a href="src/interfaces/IBalanceProvider.sol/interface.IBalanceProvider.html"><strong aria-hidden="true">3.3.</strong> IBalanceProvider</a></li><li class="chapter-item expanded "><a href="src/interfaces/IProtocolContext.sol/interface.IProtocolContext.html"><strong aria-hidden="true">3.4.</strong> IProtocolContext</a></li><li class="chapter-item expanded "><a href="src/interfaces/IProtocolController.sol/interface.IProtocolController.html"><strong aria-hidden="true">3.5.</strong> IProtocolController</a></li><li class="chapter-item expanded "><a href="src/interfaces/IRewardReceiver.sol/interface.IRewardReceiver.html"><strong aria-hidden="true">3.6.</strong> IRewardReceiver</a></li><li class="chapter-item expanded "><a href="src/interfaces/IRewardVault.sol/interface.IRewardVault.html"><strong aria-hidden="true">3.7.</strong> IRewardVault</a></li><li class="chapter-item expanded "><a href="src/interfaces/IRouter.sol/interface.IRouter.html"><strong aria-hidden="true">3.8.</strong> IRouter</a></li><li class="chapter-item expanded "><a href="src/interfaces/IRouterModule.sol/interface.IRouterModule.html"><strong aria-hidden="true">3.9.</strong> IRouterModule</a></li><li class="chapter-item expanded "><a href="src/interfaces/ISidecar.sol/interface.ISidecar.html"><strong aria-hidden="true">3.10.</strong> ISidecar</a></li><li class="chapter-item expanded "><a href="src/interfaces/ISidecarFactory.sol/interface.ISidecarFactory.html"><strong aria-hidden="true">3.11.</strong> ISidecarFactory</a></li><li class="chapter-item expanded "><a href="src/interfaces/IStrategy.sol/interface.IStrategy.html"><strong aria-hidden="true">3.12.</strong> IStrategy</a></li></ol></li><li class="chapter-item expanded "><a href="src/libraries/index.html"><strong aria-hidden="true">4.</strong> libraries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="src/libraries/ImmutableArgsParser.sol/library.ImmutableArgsParser.html"><strong aria-hidden="true">4.1.</strong> ImmutableArgsParser</a></li><li class="chapter-item expanded "><a href="src/libraries/LayerZeroEID.sol/library.LayerZeroEID.html"><strong aria-hidden="true">4.2.</strong> LayerZeroEID</a></li></ol></li><li class="chapter-item expanded "><a href="src/merkl/index.html"><strong aria-hidden="true">5.</strong> merkl</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="src/merkl/UniversalBoostRegistry.sol/contract.UniversalBoostRegistry.html"><strong aria-hidden="true">5.1.</strong> UniversalBoostRegistry</a></li></ol></li><li class="chapter-item expanded "><a href="src/Accountant.sol/contract.Accountant.html"><strong aria-hidden="true">6.</strong> Accountant</a></li><li class="chapter-item expanded "><a href="src/Allocator.sol/contract.Allocator.html"><strong aria-hidden="true">7.</strong> Allocator</a></li><li class="chapter-item expanded "><a href="src/AutocompoundedVault.sol/contract.AutocompoundedVault.html"><strong aria-hidden="true">8.</strong> AutocompoundedVault</a></li><li class="chapter-item expanded "><a href="src/Factory.sol/abstract.Factory.html"><strong aria-hidden="true">9.</strong> Factory</a></li><li class="chapter-item expanded "><a href="src/ProtocolContext.sol/contract.ProtocolContext.html"><strong aria-hidden="true">10.</strong> ProtocolContext</a></li><li class="chapter-item expanded "><a href="src/ProtocolController.sol/contract.ProtocolController.html"><strong aria-hidden="true">11.</strong> ProtocolController</a></li><li class="chapter-item expanded "><a href="src/RewardReceiver.sol/contract.RewardReceiver.html"><strong aria-hidden="true">12.</strong> RewardReceiver</a></li><li class="chapter-item expanded "><a href="src/RewardVault.sol/contract.RewardVault.html"><strong aria-hidden="true">13.</strong> RewardVault</a></li><li class="chapter-item expanded "><a href="src/Router.sol/contract.Router.html"><strong aria-hidden="true">14.</strong> Router</a></li><li class="chapter-item expanded "><a href="src/Sidecar.sol/abstract.Sidecar.html"><strong aria-hidden="true">15.</strong> Sidecar</a></li><li class="chapter-item expanded "><a href="src/SidecarFactory.sol/abstract.SidecarFactory.html"><strong aria-hidden="true">16.</strong> SidecarFactory</a></li><li class="chapter-item expanded "><a href="src/Strategy.sol/abstract.Strategy.html"><strong aria-hidden="true">17.</strong> Strategy</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Stake DAO Fusion</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/stake-dao/contracts-monorepo" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="stake-dao-staking-v2"><a class="header" href="#stake-dao-staking-v2">Stake DAO Staking v2</a></h1>
<pre><code>              #####
      #################
    ########################
  #################################
 ######################################
 #######################################
########################################
######       ##########################
 #####       #########################
  #######   ##############   ## #######
    #####  ###########      #### ######
          ###### #####      ##### ######
         ######   #####     #####  #####
        ######    #####     #####   #### Staking v2
</code></pre>
<p><a href="https://github.com/stake-dao/contracts-monorepo/actions/workflows/strategies_unit-tests.yml"><img src="https://github.com/stake-dao/contracts-monorepo/actions/workflows/strategies_unit-tests.yml/badge.svg?branch=main" alt="Unit Tests" /></a>
<a href="https://github.com/stake-dao/contracts-monorepo/actions/workflows/strategies_coverage.yml"><img src="https://github.com/stake-dao/contracts-monorepo/actions/workflows/strategies_coverage.yml/badge.svg?branch=main" alt="Coverage" /></a>
<a href="https://github.com/stake-dao/contracts-monorepo/actions/workflows/strategies_docs.yml"><img src="https://github.com/stake-dao/contracts-monorepo/actions/workflows/strategies_docs.yml/badge.svg?branch=main" alt="Docs" /></a></p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Stake DAO Staking v2 is the next-generation yield aggregator protocol, designed to address the limitations of traditional DeFi vaults. It delivers instant, accurate, and portable rewards, eliminates reward dilution, and dramatically reduces harvest costs. This documentation is intended for integrators, contributors, and auditors. <strong>User-facing documentation is available at <a href="https://docs.stakedao.org/">https://docs.stakedao.org/</a>.</strong></p>
<ul>
<li><strong>Product page:</strong> <a href="https://www.stakedao.org/yield">https://www.stakedao.org/yield</a></li>
<li><strong>User documentation:</strong> <a href="https://docs.stakedao.org/strategies">https://docs.stakedao.org/strategies</a> [WIP 🚧]</li>
</ul>
<p>For a detailed analysis of all contracts, their responsibilities, and how the system works, please refer to the <a href="./documentation/SPEC.html">SPEC.md</a> file. It contains in-depth documentation of the protocol architecture, component interactions, and process flows.</p>
<h2 id="key-features"><a class="header" href="#key-features">Key Features</a></h2>
<ul>
<li><strong>Instant reward distribution:</strong> Users receive rewards as soon as they are generated. No more streaming delays.</li>
<li><strong>Zero reward loss on withdrawal:</strong> All accrued rewards are claimable upon withdrawal.</li>
<li><strong>No reward dilution:</strong> The Accountant contract ensures new depositors cannot dilute existing users' rewards.</li>
<li><strong>Cross-vault reward pooling:</strong> Rewards are pooled per protocol, not per vault, enabling more frequent and efficient harvests.</li>
<li><strong>5x lower harvest costs:</strong> Harvester fees are reduced from 0.5% to 0.05%.</li>
<li><strong>Full reward portability:</strong> Users can move between vaults without losing rewards or waiting for ramp-up periods.</li>
<li><strong>Audited and permissioned:</strong> Security and compliance features, including emergency shutdown and granular permissions.</li>
</ul>
<p>These improvements enable dynamic fund management across all Stake DAO vaults. Staking Architecture v2 is also compatible with <a href="https://github.com/stake-dao/only-boost">OnlyBoost</a>, making it the most attractive solution for liquidity provision on all supported protocols.</p>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<p>Staking v2 introduces a modular architecture with the following core contracts:</p>
<ul>
<li><strong>ProtocolController:</strong> Manages protocol-wide permissions and components.</li>
<li><strong>ProtocolContext:</strong> Provides shared protocol logic and configuration for strategies and harvesters.</li>
<li><strong>RewardVault:</strong> User entrypoint. Handles deposits, withdrawals, and manages extra rewards (distributed traditionally).</li>
<li><strong>Accountant:</strong> Tracks and allocates rewards per user, ensuring instant and accurate distribution.</li>
<li><strong>Strategy:</strong> Executes yield-generating logic and interacts with underlying protocols.</li>
<li><strong>Allocator:</strong> Handles optimal distribution of deposited funds across multiple yield strategies.</li>
<li><strong>Sidecar:</strong> Provides auxiliary features and integrations.</li>
</ul>
<p>The Accountant contract enables cross-vault reward pooling, so rewards from all pools of a given protocol are distributed instantly and fairly to users. Extra rewards (e.g., pool-specific incentives) are managed by the RewardVault and distributed using the traditional mechanism.</p>
<h3 id="protocol-flow-diagram"><a class="header" href="#protocol-flow-diagram">Protocol Flow Diagram</a></h3>
<p>Below is a diagram illustrating the deposit and withdraw flow in Staking v2:</p>
<p><img src="./documentation/staking-v2-flow.svg" alt="Staking v2 Flow" /></p>
<h2 id="integrated-protocols"><a class="header" href="#integrated-protocols">Integrated Protocols</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Status</th></tr></thead><tbody>
<tr><td>Curve</td><td>Planned</td></tr>
<tr><td>Balancer</td><td>Planned</td></tr>
<tr><td>Pendle</td><td>Planned</td></tr>
<tr><td>Yearn</td><td>Planned</td></tr>
</tbody></table>
</div>
<blockquote>
<p>You can find all the deployed Stake DAO contracts <a href="https://github.com/stake-dao/offchain-registry/">here</a>.</p>
</blockquote>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<blockquote>
<p><strong>Note:</strong> Before running or testing the project, you must create a <code>.env</code> file in the root of this package and populate it with the required keys from the <code>.env.example</code> file. This is necessary for local development and CI to work correctly.</p>
</blockquote>
<p>This package is a Foundry-based smart contract project and targets Solidity version <code>0.8.28</code>.</p>
<h3 id="setup"><a class="header" href="#setup">Setup</a></h3>
<p>To install all dependencies for this package, run the following command at the root of the repository:</p>
<pre><code class="language-sh">pnpm install
</code></pre>
<h3 id="quality"><a class="header" href="#quality">Quality</a></h3>
<p>We enforce consistent code style and quality using the following tools:</p>
<ul>
<li><strong>Formatting:</strong> <a href="https://book.getfoundry.sh/forge/formatting">Forge fmt</a> is used to automatically format Solidity code.</li>
<li><strong>Linting:</strong> <a href="https://github.com/protofire/solhint">solhint</a> is used to lint Solidity code for style and best practices.</li>
</ul>
<p>To check code formatting and linting, run:</p>
<pre><code class="language-sh">make lint
</code></pre>
<p>To automatically fix formatting and linting issues, run:</p>
<pre><code class="language-sh">make lint-fix
</code></pre>
<p>Please ensure your code passes these checks before submitting a pull request.</p>
<h3 id="testing"><a class="header" href="#testing">Testing</a></h3>
<p>We use the <strong>Branching Tree Technique (BTT)</strong> to structure test specifications, which enhances clarity and coverage by modeling test cases as branching decision trees.</p>
<h4 id="branching-tree-technique"><a class="header" href="#branching-tree-technique">Branching Tree Technique</a></h4>
<p>Test specifications are written using BTT. For more information, see:</p>
<ul>
<li><a href="https://x.com/PaulRBerg/status/1682346315806539776">Paul R. Berg's Introduction to BTT</a></li>
<li><a href="https://shubhchain.hashnode.dev/smart-contract-testing-made-easy">BTT Overview by Shubhchain</a></li>
<li><a href="https://github.com/PaulRBerg/btt-examples">Example BTT Implementations</a></li>
</ul>
<h4 id="generating-tests-with-bulloak"><a class="header" href="#generating-tests-with-bulloak">Generating Tests with Bulloak</a></h4>
<p>We recommend using <a href="https://github.com/alexfertel/bulloak">Bulloak</a> to generate test files from BTT specifications automatically.</p>
<p>To scaffold test files from your branching tree specification, run:</p>
<pre><code class="language-sh">bulloak scaffold -w &lt;file_name&gt;.tree -s 0.8.28
</code></pre>
<h2 id="security--compliance"><a class="header" href="#security--compliance">Security &amp; Compliance</a></h2>
<ul>
<li><strong>Audits:</strong> The contracts have been audited by Trust Security and Omniscia. Audit reports are available in the <a href="audit/"><code>audit/</code></a> directory.</li>
<li><strong>Permission system:</strong> Granular, contract-level permissions are managed by the ProtocolController.</li>
<li><strong>Emergency shutdown:</strong> Both gauge-level and protocol-level shutdowns are available for rapid response to threats.</li>
<li><strong>Compliance:</strong> The protocol is non-custodial, open-source, and subject to DAO governance. Users are responsible for their own legal compliance.</li>
</ul>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>This package is licensed under the Business Source License (BSL). See the LICENSE file for details. The BSL expires on <strong>January 1, 2028</strong> or as set on-chain.</p>
<h2 id="contact"><a class="header" href="#contact">Contact</a></h2>
<p>For questions, support, or partnership inquiries, please contact: <a href="mailto:contact@stakedao.org">contact@stakedao.org</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next prefetch" href="src/RouterModules/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

                    <a rel="next prefetch" href="src/RouterModules/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>


    </div>
    </body>
</html>
